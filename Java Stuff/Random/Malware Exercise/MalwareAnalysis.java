import java.util.ArrayList;
import java.util.Arrays;
    
public class MalwareAnalysis {
    public static int[] simulate(int[] entries) {

        if (entries.length < 8) return entries;
        int n = entries.length;
        ArrayList list = new ArrayList<Integer>();

        // i - 3, i + 4

        for(int i = 0; i < n; i++ ){
            if(i < 3) {
                // compare to just i + 4
                if (entries[i + 4] >= entries[i]){
                    list.add(i);
                }
            } else if(i < n-4) {
                if(entries[i - 3] >= entries[i] || entries[i + 4] >= entries[i]) {
                    list.add(i);
                }
            } else { // right is out of picture, compare to just i - 3
                if (entries[i -3] >= entries[i]){
                    list.add(i);
                }
                
            }
        }

        for(int i = 0; i < list.size(); i++) {
            entries[(int)list.get(i)] = 0;
        }
        return entries;
    }

    public static void main(String[] args) {
        int[] records = new int[] { 1, 2, 0, 5, 0, 2, 4, 3, 3, 3 };
        System.out.println(Arrays.toString(simulate(records)));
        // Expected output:
        // 1, 0, 0, 5, 0, 0, 0, 3, 3, 0

        int[] test4 = {10, 20, 30, 15, 25, 35, 45, 55};
        System.out.println(Arrays.toString(simulate(test4)));
    }
}
